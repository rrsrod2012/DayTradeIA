REQUIRE_MTF_CONFIRM=true
MTF_CONFIRM_TF=M1
COOLDOWN_SMART=true
COOLDOWN_FAIL_N=2
COOLDOWN_BLOCK_CANDLES=8
WATCHER_DEBOUNCE_MS=600

DADOS_DIR=C:\Users\rodrs\AppData\Roaming\MetaQuotes\Terminal\D0E8209F77C8CF37AD8BF550E51FF075\MQL5\Files
CSV_FILES=WINM1.csv,WINM5.csv,WDOM1.csv,WDOM5.csv
CSV_WATCH_POLLING=true
CSV_IMPORTER=../lib/csvImporter#importCsvFile
MICRO_MODEL_URL=http://127.0.0.1:5001
CSV_IMPORTER=./lib/csvImporter
CSV_TIMEZONE=America/Sao_Paulo

AUTO_TRAINER_POLL_MS=60000
AUTO_TRAINER_LOOKBACK=120
AUTO_TRAINER_HORIZON=12
AUTO_TRAINER_SL_ATR=1.0
AUTO_TRAINER_RR=2.0
AUTO_TRAINER_POKE_ON_IMPORT=true
AUTO_TRAINER_LABEL_MODE=binary  # binary | three | continuous
AUTO_TRAINER_TXN_COST_POINTS=0
AUTO_TRAINER_BATCH=64
AUTO_TRAINER_EPOCHS=2
AUTO_TRAINER_HTTP_TIMEOUT_MS=20000

# Breakeven simples ao andar 1x ATR
AUTO_TRAINER_BE_ENABLED=1
AUTO_TRAINER_BE_TRIGGER_ATR=1.0
AUTO_TRAINER_BE_OFFSET_POINTS=0
AUTO_TRAINER_DEBUG=1

# Trailing ATR após BE (mude para 0 se quiser trailar desde a entrada)
AUTO_TRAINER_TRAIL_ENABLED=1
AUTO_TRAINER_TRAIL_AFTER_BE_ONLY=1
AUTO_TRAINER_TRAIL_ATR=1.0

# Parcial 50% em 1x ATR e arma BE
AUTO_TRAINER_PARTIAL_ENABLED=1
AUTO_TRAINER_PARTIAL_RATIO=0.5
AUTO_TRAINER_PARTIAL_ATR=1.0
AUTO_TRAINER_PARTIAL_BREAKEVEN_AFTER=1

AUTO_TRAINER_BE_AT_PTS=10
AUTO_TRAINER_BE_OFFSET_PTS=0
BACKTEST_BE_AT_PTS=10
BACKTEST_BE_OFFSET_PTS=0

AUTO_TRAINER_BE_TRIGGER_POINTS=10   # arma BE quando avançar +200 pts
AUTO_TRAINER_PRIORITY=TP_FIRST_AFTER_BE
AUTO_TRAINER_STORE_URL=file:///C:/tmp/DayTradeIA/ai-node/model_store

# ===================== LOGS =====================
LOG_JSON=1
LOG_LEVEL=info


# ===================== SERVIDOR =====================
PORT=3000
NODE_ENV=development
TZ=America/Sao_Paulo

# ===================== BANCO (SQLite via Prisma) =====================
# Mantém o mesmo dev.db do projeto
DATABASE_URL="file:./dev.db"

# ===================== WEBSOCKET =====================
WS_ENABLED=true

# ===================== CSV IMPORT (MT5 - M1 como FONTE) =====================
# Pasta onde você colocará os CSVs exportados do MT5 (M1)
DADOS_DIR=C:\Users\rodrs\AppData\Roaming\MetaQuotes\Terminal\D0E8209F77C8CF37AD8BF550E51FF075\MQL5\Files

# ===================== IA (MICROSERVIÇO) =====================
# URL do ai-node (abaixo)
MICRO_MODEL_URL=http://127.0.0.1:5001

# --- ENGINE (filtros de entrada) ---
ENGINE_MIN_ADX=20
ENGINE_ADX_LEN=14
ENGINE_MIN_SLOPE=0.02
ENGINE_MAX_DIST_VWAP_ATR=0.15
ENGINE_REQUIRE_BREAKOUT=true
ENGINE_COOLDOWN=3
ENGINE_ANTI_OVERLAP_ATR=0.75
ENGINE_MIN_PROB=0.62
ENGINE_MIN_EV=0.10

# --- EXIT RULES ---
EXIT_ENABLE_BREAKEVEN=true
EXIT_BREAKEVEN_R=1.0
EXIT_ENABLE_TRAILING=true
EXIT_TRAIL_START_R=1.5
EXIT_TRAIL_ATR_MULT=1.0
EXIT_ENABLE_PARTIAL=false
EXIT_PARTIAL_R=1.2
EXIT_PARTIAL_FRACTION=0.5


# sizing/saídas
EXIT_SL_ATR_K=1.0
EXIT_RR=2.0
EXIT_ATR_TRAIL_K=1.0
EXIT_TIME_STOP_BARS=10
EXIT_BREAK_EVEN_R=1.0
EXIT_BE_OFFSET_R=0.2
EXIT_PARTIAL1_R=1
EXIT_PARTIAL2_R=2
EXIT_PARTIAL_REMAIN_TRAIL=1

# custos
SLIPPAGE_POINTS=0
TXN_COST_POINTS=0

BROKER_HTTP_PORT=3002